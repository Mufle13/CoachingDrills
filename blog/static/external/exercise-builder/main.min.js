var Be=Object.defineProperty,Te=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var se=(t,e,n)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,le=(t,e)=>{for(var n in e||(e={}))Ee.call(e,n)&&se(t,n,e[n]);if(ge)for(var n of ge(e))Ze.call(e,n)&&se(t,n,e[n]);return t},re=(t,e)=>Te(t,We(e));var f=(t,e,n)=>(se(t,typeof e!="symbol"?e+"":e,n),n);const Ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const A of l.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&i(A)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};Ge();function E(){}function Ce(t){return t()}function pe(){return Object.create(null)}function S(t){t.forEach(Ce)}function Je(t){return typeof t=="function"}function ke(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let $;function me(t,e){return $||($=document.createElement("a")),$.href=e,t===$.href}function Xe(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function oe(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function te(t){return document.createTextNode(t)}function y(){return te(" ")}function m(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Se(t){return function(e){return e.preventDefault(),t.call(this,e)}}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Oe(t){return Array.from(t.childNodes)}function we(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function be(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let X;function J(t){X=t}function Fe(){if(!X)throw new Error("Function called outside component initialization");return X}function Ne(t){Fe().$$.on_mount.push(t)}const G=[],ye=[],ne=[],ve=[],He=Promise.resolve();let ce=!1;function Ke(){ce||(ce=!0,He.then(Pe))}function de(t){ne.push(t)}const ae=new Set;let ee=0;function Pe(){const t=X;do{for(;ee<G.length;){const e=G[ee];ee++,J(e),Ve(e.$$)}for(J(null),G.length=0,ee=0;ye.length;)ye.pop()();for(let e=0;e<ne.length;e+=1){const n=ne[e];ae.has(n)||(ae.add(n),n())}ne.length=0}while(G.length);for(;ve.length;)ve.pop()();ce=!1,ae.clear(),J(t)}function Ve(t){if(t.fragment!==null){t.update(),S(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}const ie=new Set;let De;function Me(t,e){t&&t.i&&(ie.delete(t),t.i(e))}function Qe(t,e,n,i){if(t&&t.o){if(ie.has(t))return;ie.add(t),De.c.push(()=>{ie.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}}function Ue(t){t&&t.c()}function je(t,e,n,i){const{fragment:o,on_mount:l,on_destroy:A,after_update:g}=t.$$;o&&o.m(e,n),i||de(()=>{const h=l.map(Ce).filter(Je);A?A.push(...h):S(h),t.$$.on_mount=[]}),g.forEach(de)}function Le(t,e){const n=t.$$;n.fragment!==null&&(S(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qe(t,e){t.$$.dirty[0]===-1&&(G.push(t),Ke(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Re(t,e,n,i,o,l,A,g=[-1]){const h=X;J(t);const a=t.$$={fragment:null,ctx:null,props:l,update:E,not_equal:o,bound:pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:pe(),dirty:g,skip_bound:!1,root:e.target||h.$$.root};A&&A(a.root);let C=!1;if(a.ctx=n?n(t,e.props||{},(d,M,...j)=>{const b=j.length?j[0]:M;return a.ctx&&o(a.ctx[d],a.ctx[d]=b)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](b),C&&qe(t,d)),M}):[],a.update(),C=!0,S(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const d=Oe(e.target);a.fragment&&a.fragment.l(d),d.forEach(O)}else a.fragment&&a.fragment.c();e.intro&&Me(t.$$.fragment),je(t,e.target,e.anchor,e.customElement),Pe()}J(h)}class Ye{$destroy(){Le(this,1),this.$destroy=E}$on(e,n){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var _e="data:image/png;base64,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",xe="data:image/png;base64,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";class Ae{constructor(e){f(this,"id","_"+Math.random().toString(36).substring(2,9));f(this,"name");f(this,"coordinates");f(this,"selected",!1);this.coordinates=e}asJson(){return{coordinates:this.coordinates,type:this.constructor.name}}}class T extends Ae{constructor(n,i,o){super(o);f(this,"color");f(this,"size");this.color=n,this.size=i,this.name=`Player ${this.color}`}render(n){this.draw(n)}draw(n){n.beginPath(),n.arc(this.coordinates.x,this.coordinates.y,this.size,0,2*Math.PI),n.fillStyle=this.color,n.fill()}move(n){let i=n.offsetX,o=n.offsetY;this.coordinates.x=i,this.coordinates.y=o}isInside(n){let i=n.offsetX,o=n.offsetY;return i>=this.coordinates.x-this.size&&i<=this.coordinates.x+this.size&&o>=this.coordinates.y-this.size&&o<=this.coordinates.y+this.size}clone(){let n={x:this.coordinates.x+this.size*2,y:this.coordinates.y};return new T(this.color,this.size,n)}asJson(){return re(le({},super.asJson()),{color:this.color,size:this.size})}}class ze extends Ae{constructor(){super(...arguments);f(this,"size",{width:24,height:24});f(this,"image");f(this,"src")}render(n){let i=new Image;i.src=this.src,i.onload=()=>{this.image=i,n.drawImage(this.image,this.coordinates.x,this.coordinates.y)}}draw(n){n.drawImage(this.image,this.coordinates.x,this.coordinates.y)}move(n){let i=n.offsetX,o=n.offsetY;this.coordinates.x=i-this.image.width/2,this.coordinates.y=o-this.image.height/2}isInside(n){let i=n.offsetX,o=n.offsetY;return i>=this.coordinates.x&&i<=this.coordinates.x+this.size.width&&o>=this.coordinates.y&&o<=this.coordinates.y+this.size.height}asJson(){return re(le({},super.asJson()),{src:this.src})}}class he extends ze{constructor(){super(...arguments);f(this,"name","Ball");f(this,"src",xe)}clone(){let n={x:this.coordinates.x+this.size.width,y:this.coordinates.y};return new he(n)}}class ue extends ze{constructor(){super(...arguments);f(this,"name","Plot");f(this,"src",_e)}clone(){let n={x:this.coordinates.x+this.size.width,y:this.coordinates.y};return new ue(n)}}class fe{constructor(e,n,i=2){f(this,"id","_"+Math.random().toString(36).substring(2,9));f(this,"name","Arrow");f(this,"color");f(this,"width");f(this,"selected",!1);f(this,"selectedPart",3);f(this,"coordinates");this.color=e,this.width=i,this.coordinates=n}render(e){this.draw(e)}asJson(){return{coordinates:this.coordinates,color:this.color,width:this.width,type:this.constructor.name}}get length(){return Math.sqrt(Math.pow(this.coordinates.end.x-this.coordinates.start.x,2)+Math.pow(this.coordinates.end.y-this.coordinates.start.y,2))}move(e){let n={x:this.coordinates.end.x-this.coordinates.start.x,y:this.coordinates.end.y-this.coordinates.start.y};this.selectedPart==0?this.coordinates.start={x:e.offsetX,y:e.offsetY}:this.selectedPart==1?this.coordinates.end={x:e.offsetX,y:e.offsetY}:this.selectedPart==2&&(this.coordinates={start:{x:e.offsetX-n.x/2,y:e.offsetY-n.y/2},end:{x:e.offsetX+n.x/2,y:e.offsetY+n.y/2}})}draw(e){let n=10,i=5,o=this.coordinates.start.x,l=this.coordinates.end.x,A=this.coordinates.start.y,g=this.coordinates.end.y,h=Math.atan2(g-A,l-o);e.lineWidth=this.width,e.lineCap="round",e.strokeStyle=this.color,e.beginPath(),e.moveTo(o,A),e.lineTo(l,g),e.stroke(),e.lineWidth=1,e.lineWidth=i,e.beginPath(),e.moveTo(l,g),e.lineTo(l-n*Math.cos(h-Math.PI/7),g-n*Math.sin(h-Math.PI/7)),e.lineTo(l-n*Math.cos(h+Math.PI/7),g-n*Math.sin(h+Math.PI/7)),e.lineTo(l,g),e.lineTo(l-n*Math.cos(h-Math.PI/7),g-n*Math.sin(h-Math.PI/7)),e.stroke()}isInside(e){let n=this.clickedPart(e);return n==3?(this.selectedPart=3,!1):(this.selectedPart=n,!0)}clickedPart(e){let n={x:(this.coordinates.start.x+this.coordinates.end.x)/2,y:(this.coordinates.start.y+this.coordinates.end.y)/2},i=this.length/8,o=(e.offsetX-this.coordinates.start.x)**2+(e.offsetY-this.coordinates.start.y)**2<i**2,l=(e.offsetX-this.coordinates.end.x)**2+(e.offsetY-this.coordinates.end.y)**2<i**2,A=(e.offsetX-n.x)**2/this.length**2+(e.offsetY-n.y)**2/15**2<=1;return o?0:l?1:A?2:3}clone(){let e={x:this.coordinates.end.x-this.coordinates.start.x,y:this.coordinates.end.y-this.coordinates.start.y},n={start:{x:this.coordinates.start.x+e.x,y:this.coordinates.start.y},end:{x:this.coordinates.end.x+e.x,y:this.coordinates.end.y}};return new fe(this.color,n,this.width)}}class $e{constructor(e="green",n="#FFFFFF"){f(this,"width",800);f(this,"height",500);f(this,"background_color");f(this,"line_width",2);f(this,"line_color");this.background_color=e,this.line_color=n}asJson(){return{width:this.width,height:this.height,background_color:this.background_color,line_width:this.line_width,line_color:this.line_color,type:this.constructor.name}}drawCorners(e){e.strokeStyle=this.line_color,e.lineWidth=this.line_width,e.beginPath(),e.arc(40,15,25,0,.5*Math.PI),e.stroke(),e.beginPath(),e.arc(40,485,25,1.5*Math.PI,0),e.stroke(),e.beginPath(),e.arc(this.width-40,15,25,.5*Math.PI,Math.PI),e.stroke(),e.beginPath(),e.arc(this.width-40,this.height-15,25,1*Math.PI,1.5*Math.PI),e.stroke()}drawGoalzone(e){e.strokeStyle=this.line_color,e.lineWidth=this.line_width,e.beginPath(),e.moveTo(40,140),e.lineTo(170,140),e.lineTo(170,365),e.lineTo(40,365),e.stroke(),e.beginPath(),e.moveTo(40,180),e.lineTo(90,180),e.lineTo(90,330),e.lineTo(40,330),e.stroke(),e.beginPath(),e.arc(170,250,35,1.5*Math.PI,.5*Math.PI),e.stroke(),e.beginPath(),e.moveTo(this.width-40,140),e.lineTo(this.width-40-130,140),e.lineTo(this.width-40-130,365),e.lineTo(this.width-40,365),e.stroke(),e.beginPath(),e.moveTo(this.width-40,180),e.lineTo(this.width-40-50,180),e.lineTo(this.width-40-50,330),e.lineTo(this.width-40,330),e.stroke(),e.beginPath(),e.arc(this.width-40-130,250,35,.5*Math.PI,1.5*Math.PI),e.stroke()}render(e){e.fillStyle=this.background_color,e.fillRect(0,0,this.width,this.height),this.drawCorners(e),this.drawGoalzone(e),e.beginPath(),e.moveTo(this.width/2,15),e.lineTo(this.width/2,this.height-15),e.stroke(),e.beginPath(),e.arc(this.width/2,this.height/2,75,0,2*Math.PI),e.stroke(),e.rect(40,15,this.width-40*2,this.height-30),e.strokeStyle=this.line_color,e.lineWidth=this.line_width,e.stroke()}}function Ie(t){let e;function n(l,A){return l[3]?tt:et}let i=n(t),o=i(t);return{c(){e=p("div"),o.c(),u(e,"class","absolute transform translate-x-[-50%] translate-y-[-1%] px-3 top-[1%] left-[50%] flex justify-center items-center text-white backdrop-blur-md shadow-md bg-black/30 rounded select-none")},m(l,A){oe(l,e,A),o.m(e,null)},p(l,A){i===(i=n(l))&&o?o.p(l,A):(o.d(1),o=i(l),o&&(o.c(),o.m(e,null)))},d(l){l&&O(e),o.d()}}}function et(t){let e;return{c(){e=p("div"),e.innerHTML=`<div class="flex flex-col space-y-1 text-xs items-center"><span class="bg-gray-800 rounded-md p-1 px-2 border items-center justify-center text-white w-full text-center font-thin">Shift</span> 
                                <span>Clone</span></div> 
                            <div class="flex flex-col space-y-1 text-xs items-center"><span class="bg-gray-800 rounded-md p-1 px-2 border items-center justify-center text-white w-full text-center font-thin">Del</span> 
                                <span>Remove</span></div>`,u(e,"class","flex flex-row space-x-6 px-4 justify-evenly items-center justify-center h-16")},m(n,i){oe(n,e,i)},p:E,d(n){n&&O(e)}}}function tt(t){let e,n=t[4].x+"",i,o,l=t[4].y+"",A;return{c(){e=p("div"),i=te(n),o=te(", "),A=te(l),u(e,"class","flex h-12 justify-center items-center")},m(g,h){oe(g,e,h),c(e,i),c(e,o),c(e,A)},p(g,h){h[0]&16&&n!==(n=g[4].x+"")&&we(i,n),h[0]&16&&l!==(l=g[4].y+"")&&we(A,l)},d(g){g&&O(e)}}}function nt(t){let e,n,i,o,l,A,g,h,a,C,d,M,j,b,L,k,F,R,N,H,K,Y,V,_,D,x,Q,z,U,B,q,I,s,r,v,W,w=t[2]!=null&&Ie(t);return{c(){e=p("div"),n=p("div"),i=p("div"),o=p("button"),l=p("img"),g=y(),h=p("button"),a=p("img"),d=y(),M=p("hr"),j=y(),b=p("button"),b.innerHTML='<div class="w-5 h-5 bg-blue-500 rounded-full"></div>',L=y(),k=p("button"),k.innerHTML='<div class="w-5 h-5 bg-red-500 rounded-full"></div>',F=y(),R=p("button"),R.innerHTML='<div class="w-5 h-5 bg-yellow-500 rounded-full"></div>',N=y(),H=p("hr"),K=y(),Y=p("button"),Y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-black" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',V=y(),_=p("button"),_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',D=y(),x=p("button"),x.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',Q=y(),z=p("button"),z.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',U=y(),B=p("button"),B.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z" clip-rule="evenodd"></path></svg>',q=y(),I=p("div"),w&&w.c(),s=y(),r=p("canvas"),me(l.src,A=xe)||u(l,"src",A),u(l,"class","w-5 h-5"),u(l,"alt","add ball"),u(o,"class","icon-button"),me(a.src,C=_e)||u(a,"src",C),u(a,"class","w-5 h-5"),u(a,"alt","add plot"),u(h,"class","icon-button"),u(b,"class","icon-button"),u(k,"class","icon-button"),u(R,"class","icon-button"),u(Y,"class","icon-button"),u(_,"class","icon-button"),u(x,"class","icon-button"),u(z,"class","icon-button"),u(i,"class","space-y-2 flex flex-col"),u(B,"class","icon-button"),u(n,"class","rounded flex flex-col bg-gray-50 w-16 items-center p-2 justify-between border"),u(r,"height",t[1]),u(r,"width",t[0]),u(r,"class","rounded"),u(I,"class","relative"),be(I,"height","500px"),be(I,"width","800px"),u(e,"class","flex flex-row items-start space-x-2 items-stretch")},m(P,Z){oe(P,e,Z),c(e,n),c(n,i),c(i,o),c(o,l),c(i,g),c(i,h),c(h,a),c(i,d),c(i,M),c(i,j),c(i,b),c(i,L),c(i,k),c(i,F),c(i,R),c(i,N),c(i,H),c(i,K),c(i,Y),c(i,V),c(i,_),c(i,D),c(i,x),c(i,Q),c(i,z),c(n,U),c(n,B),c(e,q),c(e,I),w&&w.m(I,null),c(I,s),c(I,r),v||(W=[m(window,"keydown",t[10]),m(o,"click",t[14]),m(h,"click",t[15]),m(b,"click",t[16]),m(k,"click",t[17]),m(R,"click",t[18]),m(Y,"click",t[19]),m(_,"click",t[20]),m(x,"click",t[21]),m(z,"click",t[22]),m(B,"click",t[9]),m(r,"mousedown",t[11]),m(r,"mousemove",t[13]),m(r,"mouseup",t[12]),m(r,"keydown",Se(t[10]))],v=!0)},p(P,Z){P[2]!=null?w?w.p(P,Z):(w=Ie(P),w.c(),w.m(I,s)):w&&(w.d(1),w=null),Z[0]&2&&u(r,"height",P[1]),Z[0]&1&&u(r,"width",P[0])},i:E,o:E,d(P){P&&O(e),w&&w.d(),v=!1,S(W)}}}function it(t,e,n){let i,o,l,{width:A=800}=e,{height:g=500}=e,h,a,C=null,d=[];Ne(()=>{h=document.querySelector("canvas"),a=h.getContext("2d"),C=new $e,C.render(a)});function M(s={x:0,y:0}){let r=new he(s);k(r)}function j(s={x:0,y:0}){let r=new ue(s);k(r)}function b(s,r={x:0,y:0}){let v=new T(s,12,r);k(v)}function L(s,r={start:{x:350,y:300},end:{x:450,y:200}}){let v=new fe(s,r);d=[...d,v],v.render(a)}function k(s){if(d.length==0)s instanceof T?s.coordinates.x=s.size:s.coordinates.x=0,s instanceof T?s.coordinates.y=s.size:s.coordinates.y=0;else for(var r=0;r<800-24;r+=24){var v=d.find(W=>W instanceof Ae&&W.coordinates.x>=r&&W.coordinates.x<=r+24);if(v==null){s instanceof T?s.coordinates.x=r+s.size:s.coordinates.x=r,s instanceof T?s.coordinates.y=0+s.size:s.coordinates.y=0;break}}d=[...d,s],s.render(a)}function F(){var s=h.toDataURL("image/png").replace("image/png","image/octet-stream"),r=document.createElement("a");r.download="image.png",r.href=s,r.click()}function R(s){if(o!=null)switch(s.key){case"Delete":Y();break;case"Shift":V();break}}function N(s){let r=d.find(v=>v.isInside(s));r!=null?(n(2,o=r),n(3,i=!0)):n(2,o=null)}function H(s){o!=null&&(d=[...d],n(3,i=!1))}function K(s){if(n(4,l={x:s.offsetX,y:s.offsetY}),o!=null&&i){C.render(a),o.move(s);for(var r=0;r<d.length;r++)d[r].draw(a);o.draw(a)}}function Y(){if(o!=null){d=[...d.filter(r=>r!=o)],C.render(a);for(var s=0;s<d.length;s++)d[s].draw(a);n(2,o=null)}}function V(){if(o!=null){let s=o.clone();d=[...d,s],s.render(a),n(2,o=d[d.length-1])}}const _=s=>M(),D=s=>j(),x=s=>b("#3b82f6"),Q=s=>b("#ef4444"),z=s=>b("#eab308"),U=s=>L("black"),B=s=>L("#3b82f6"),q=s=>L("#ef4444"),I=s=>L("#eab308");return t.$$set=s=>{"width"in s&&n(0,A=s.width),"height"in s&&n(1,g=s.height)},n(3,i=!1),n(2,o=null),n(4,l={x:0,y:0}),[A,g,o,i,l,M,j,b,L,F,R,N,H,K,_,D,x,Q,z,U,B,q,I]}class ot extends Ye{constructor(e){super(),Re(this,e,it,nt,ke,{width:0,height:1},null,[-1,-1])}}function st(t){let e,n;return e=new ot({}),{c(){Ue(e.$$.fragment)},m(i,o){je(e,i,o),n=!0},p:E,i(i){n||(Me(e.$$.fragment,i),n=!0)},o(i){Qe(e.$$.fragment,i),n=!1},d(i){Le(e,i)}}}class lt extends Ye{constructor(e){super(),Re(this,e,null,st,ke,{})}}new lt({target:document.getElementById("app")});
